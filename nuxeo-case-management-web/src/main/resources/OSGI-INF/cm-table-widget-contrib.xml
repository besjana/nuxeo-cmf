<?xml version="1.0"?>

<component name="com.nuxeo.cm.table.widget">

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgettypes">
    <widgetType name="listing_cm_title_link">

      <documentation>
        This widget type displays a link to navigate to a case.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, it will be used to display the
            document link and its title
          </li>
          <li>
            second field maps the unique id to be used for contextual menu (e.g.
            the document model id)
          </li>
          <li>
            third field maps the caseLink's caseDocumentId.
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_cm_title_link_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_inbox_title_link">

      <documentation>
        This widget type displays a link to navigate to a case.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, it will be used to display the
            document link and its title
          </li>
          <li>
            second field maps the unique id to be used for contextual menu (e.g.
            the document model id)
          </li>
          <li>
            third field maps the caseLink's caseDocumentId.
          </li>
          <li>
            fouth field maps the isRead property of a caseLink.
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_cm_inbox_title_link_widget_template.xhtml
      </property>

    </widgetType>

    <widgetType name="listing_draft_title_link">

      <documentation>
        This widget type displays a link to navigate to a case.
        <br />
        It requires the following fields configuration:
        <ul>
          <li>
            first field maps the document model, it will be used to display the
            document link and its title
          </li>
          <li>
            second field maps the unique id to be used for contextual menu (e.g.
            the document model id)
          </li>
          <li>
            third field maps the caseLink's caseDocumentId.
          </li>
        </ul>
      </documentation>

      <handler-class>
        org.nuxeo.ecm.platform.forms.layout.facelets.plugins.TemplateWidgetTypeHandler
      </handler-class>
      <property name="template">
        /widgets/listing/listing_cm_draft_title_link_widget_template.xhtml
      </property>

    </widgetType>
   
  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">
    
    <widget name="cm_icon_type" type="listing_icon_type">
      <labels>
        <label mode="any"></label>
      </labels>
      <fields>
        <field>data</field>
        <field>data.id</field>
        <field>data.type</field>
      </fields>
    </widget>

    <widget name="cm_listing_title_link"
      type="listing_title_link">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.cslk.senderMailboxId</field>
      </fields>
    </widget>

    <widget name="cm_mailbox_listing_title_link"
      type="listing_cm_title_link">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.ref</field>
        <field>data.cslk.caseDocumentId</field>
      </fields>
    </widget>
    
    <widget name="cm_mailbox_inbox_listing_title_link"
      type="listing_inbox_title_link">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.id</field>
        <field>data.cslk.caseDocumentId</field>
        <field>data.cslk.isRead</field>
      </fields>
    </widget>
    
    <widget name="cm_mailbox_draft_listing_title_link"
      type="listing_draft_title_link">
      <labels>
        <label mode="any">label.content.header.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
        <field>data.id</field>
        <field>data.cslk.caseDocumentId</field>
      </fields>
    </widget>

    <widget name="cm_listing_sending_date" type="datetime">
      <labels>
        <label mode="any">label.content.header.date</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.cslk.date</field>
      </fields>
      <properties widgetMode="any">
        <property name="pattern">#{nxu:basicDateAndTimeFormater()}</property>
      </properties>
    </widget>
    
    <widget name="cm_listing_sender" type="listing_author">
      <labels>
        <label mode="any">label.content.header.sender</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.cslk.sender</field>
      </fields>
    </widget>
    
    <widget name="cm_listing_uid" type="text">
      <labels>
        <label mode="any">label.content.header.uid</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.uid.uid</field>
      </fields>
    </widget>


  </extension>

</component>
