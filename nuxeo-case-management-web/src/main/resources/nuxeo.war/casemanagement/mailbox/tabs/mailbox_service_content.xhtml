<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util">

  <c:if test="#{currentDocument.currentLifeCycleState != 'deleted'}">

    <c:choose>
      <c:when test="#{documentContentViewActions.hasContentViewSupport(currentDocument, 'service')}">

        <ui:include src="/incl/document_content_view.xhtml">
          <ui:param name="contentViewCategory" value="service" />
        </ui:include>
  
      </c:when>
      <c:otherwise>
  
        <nxu:set var="provider" value="#{resultsProvidersCache.get('MAILBOX_SERVICE')}"
          cache="true">
			    <ui:decorate template="/incl/documents_layout_table.xhtml">
			      <ui:param name="documents" value="#{serviceChildrenSelectModel}" />
			      <ui:param name="showCheckboxes" value="#{true}" />
			      <ui:param name="provider" value="#{provider}" />
			      <ui:param name="providerName" value="MAILBOX_SERVICE" />
			      <ui:param name="listName" value="CURRENT_SELECTION" />
			      <ui:param name="layoutName" value="cm_caselink" />
			      <ui:define name="buttons">
			        <ui:include src="/incl/clipboard.xhtml" />
			      </ui:define>
			    </ui:decorate>
        </nxu:set>
      </c:otherwise>
    </c:choose>

  </c:if>
  <c:if test="#{currentDocument.currentLifeCycleState == 'deleted'}">
    <ui:include src="/incl/tabs/document_trash_content.xhtml" /> 
  </c:if>
  
</div>