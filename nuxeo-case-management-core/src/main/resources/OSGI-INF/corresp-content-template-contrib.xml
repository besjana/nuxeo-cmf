<?xml version="1.0"?>
<component name="com.nuxeo.correspondence.contentTemplate">

  <require>
    org.nuxeo.ecm.platform.content.template.service.ContentTemplateService.defaultContrib
  </require>

  <extension
    target="org.nuxeo.ecm.platform.content.template.service.ContentTemplateService"
    point="factoryBinding">

    <documentation>
      Sets one domain by default, in each domain a CorrespondenceMailFolder is
      created (will hold mail in date hierarchies) and a
      CorrespondenceMailboxRoot (will hold mailboxes).
    </documentation>

    <factoryBinding name="RootFactory" factoryName="SimpleTemplateFactory"
      targetType="Root">
      <acl>
        <ace principal="Administrator" permission="Everything" granted="true" />
        <ace principal="administrators" permission="Everything" granted="true" />
      </acl>
      <template>
        <templateItem typeName="Domain" id="correspondence"
          title="Correspondence" description="Correspondence Management">
        </templateItem>
      </template>
    </factoryBinding>

    <factoryBinding name="DomainFactory" factoryName="SimpleTemplateFactory"
      targetType="Domain">
      <template>
        <templateItem typeName="CorrespondenceMailFolder" id="mail"
          title="Mail" />
        <templateItem typeName="CorrespondenceMailboxRoot" id="mailboxes"
          title="Mailboxes" />
      </template>
    </factoryBinding>

  </extension>

</component>
